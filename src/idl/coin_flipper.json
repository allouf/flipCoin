{"version":"0.1.0","name":"fair_coin_flipper","instructions":[{"name":"createGame","accounts":[{"name":"playerA","isMut":true,"isSigner":true},{"name":"game","isMut":true,"isSigner":false},{"name":"escrow","isMut":true,"isSigner":false},{"name":"houseWallet","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"gameId","type":"u64"},{"name":"betAmount","type":"u64"}]},{"name":"joinGame","accounts":[{"name":"playerB","isMut":true,"isSigner":true},{"name":"game","isMut":true,"isSigner":false},{"name":"escrow","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"makeCommitment","accounts":[{"name":"player","isMut":true,"isSigner":true},{"name":"game","isMut":true,"isSigner":false}],"args":[{"name":"commitment","type":{"array":["u8",32]}}]},{"name":"revealChoice","accounts":[{"name":"player","isMut":true,"isSigner":true},{"name":"game","isMut":true,"isSigner":false},{"name":"playerA","isMut":true,"isSigner":false},{"name":"playerB","isMut":true,"isSigner":false},{"name":"houseWallet","isMut":true,"isSigner":false},{"name":"escrow","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"choice","type":{"defined":"CoinSide"}},{"name":"secret","type":"u64"}]},{"name":"resolveGameManual","accounts":[{"name":"resolver","isMut":true,"isSigner":true},{"name":"game","isMut":true,"isSigner":false},{"name":"playerA","isMut":true,"isSigner":false},{"name":"playerB","isMut":true,"isSigner":false},{"name":"houseWallet","isMut":true,"isSigner":false},{"name":"escrow","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"cancelGame","accounts":[{"name":"canceller","isMut":true,"isSigner":true},{"name":"game","isMut":true,"isSigner":false},{"name":"playerA","isMut":true,"isSigner":false},{"name":"playerB","isMut":true,"isSigner":false},{"name":"houseWallet","isMut":true,"isSigner":false},{"name":"escrow","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]}],"accounts":[{"name":"Game","type":{"kind":"struct","fields":[{"name":"gameId","type":"u64"},{"name":"playerA","type":"publicKey"},{"name":"playerB","type":"publicKey"},{"name":"betAmount","type":"u64"},{"name":"houseWallet","type":"publicKey"},{"name":"commitmentA","type":{"array":["u8",32]}},{"name":"commitmentB","type":{"array":["u8",32]}},{"name":"commitmentsComplete","type":"bool"},{"name":"choiceA","type":{"option":{"defined":"CoinSide"}}},{"name":"secretA","type":{"option":"u64"}},{"name":"choiceB","type":{"option":{"defined":"CoinSide"}}},{"name":"secretB","type":{"option":"u64"}},{"name":"status","type":{"defined":"GameStatus"}},{"name":"coinResult","type":{"option":{"defined":"CoinSide"}}},{"name":"winner","type":{"option":"publicKey"}},{"name":"houseFee","type":"u64"},{"name":"createdAt","type":"i64"},{"name":"resolvedAt","type":{"option":"i64"}},{"name":"bump","type":"u8"},{"name":"escrowBump","type":"u8"}]}}],"types":[{"name":"GameStatus","type":{"kind":"enum","variants":[{"name":"WaitingForPlayer"},{"name":"PlayersReady"},{"name":"CommitmentsReady"},{"name":"RevealingPhase"},{"name":"Resolved"},{"name":"Cancelled"}]}},{"name":"CoinSide","type":{"kind":"enum","variants":[{"name":"Heads"},{"name":"Tails"}]}}],"events":[{"name":"GameCreated","fields":[{"name":"gameId","type":"u64","index":false},{"name":"playerA","type":"publicKey","index":false},{"name":"betAmount","type":"u64","index":false}]},{"name":"PlayerJoined","fields":[{"name":"gameId","type":"u64","index":false},{"name":"playerB","type":"publicKey","index":false}]},{"name":"CommitmentMade","fields":[{"name":"gameId","type":"u64","index":false},{"name":"player","type":"publicKey","index":false},{"name":"commitment","type":{"array":["u8",32]},"index":false}]},{"name":"ChoiceRevealed","fields":[{"name":"gameId","type":"u64","index":false},{"name":"player","type":"publicKey","index":false},{"name":"choice","type":{"defined":"CoinSide"},"index":false},{"name":"secret","type":"u64","index":false}]},{"name":"GameResolved","fields":[{"name":"gameId","type":"u64","index":false},{"name":"winner","type":"publicKey","index":false},{"name":"coinResult","type":{"defined":"CoinSide"},"index":false},{"name":"winnerPayout","type":"u64","index":false},{"name":"houseFee","type":"u64","index":false},{"name":"resolvedAt","type":"i64","index":false}]},{"name":"GameCancelled","fields":[{"name":"gameId","type":"u64","index":false},{"name":"cancelledAt","type":"i64","index":false},{"name":"totalFeesCollected","type":"u64","index":false}]}],"errors":[{"code":6000,"name":"BetTooLow","msg":"Bet amount is too low"},{"code":6001,"name":"BetTooHigh","msg":"Bet amount is too high"},{"code":6002,"name":"InvalidGameStatus","msg":"Invalid game status for this operation"},{"code":6003,"name":"NotAPlayer","msg":"Player is not part of this game"},{"code":6004,"name":"InvalidCommitment","msg":"Invalid commitment provided"},{"code":6005,"name":"AlreadyRevealed","msg":"Choice already revealed"},{"code":6006,"name":"AlreadyCommitted","msg":"Player has already made a commitment"},{"code":6007,"name":"WeakSecret","msg":"Secret value is too weak, use a strong random value"},{"code":6008,"name":"NotReadyForResolution","msg":"Game is not ready for resolution"},{"code":6009,"name":"AlreadyResolved","msg":"Game is already resolved"},{"code":6010,"name":"TooEarlyToCancel","msg":"Too early to cancel the game"},{"code":6011,"name":"CannotPlayAgainstYourself","msg":"Cannot play against yourself"}]}